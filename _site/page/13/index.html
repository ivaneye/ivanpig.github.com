<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="keywords" content=""/>
    <meta name="author" content="liyouhai.com"> 
    <link rel="canonical" href="http://liyouhai.com/page/13/index.html">
    <link href="http://liyouhai.com/rss.xml" title="RSS 2.0" type="application/rss+xml" rel="alternate"/>
    <link href="/img/favicon.ico" rel="icon" type="image/x-icon">
    <title>IvanPig's Blog</title>
    <link rel="stylesheet" href="/css/min/pure-min.css">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/min/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/css/min/grids-responsive-min.css">
    <!--<![endif]-->

    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/JekyllPure-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/css/JekyllPure.css">
    <!--<![endif]-->

    <link href="/css/min/font-awesome.min.css" rel="stylesheet">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/min/font-awesome-ie7.min.css">
    <![endif]-->
    <script src="/js/min/jquery-1.7.2.min.js"></script>
    <!--
     /\_ \    __                         /\ \                __
     \//\ \  /\_\  __  __    ___   __  __\ \ \___      __   /\_\
       \ \ \ \/\ \/\ \/\ \  / __`\/\ \/\ \\ \  _ `\  /'__`\ \/\ \
        \_\ \_\ \ \ \ \_\ \/\ \L\ \ \ \_\ \\ \ \ \ \/\ \L\.\_\ \ \
        /\____\\ \_\/`____ \ \____/\ \____/ \ \_\ \_\ \__/.\_\\ \_\
        \/____/ \/_/`/___/> \/___/  \/___/   \/_/\/_/\/__/\/_/ \/_/
                       /\___/
                       \/__/
     图像可以到http://asciigen.com/  生成..记得翻墙才能正常生成.如不方便可以博客留言我帮你生成
     -->
</head>

<body>







<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
            <div class="headerpic">
                <a href="/">
                    <img src="/img/op.jpg" alt="Profile Picture" style="width: 140px;" title="返回首页">
                </a>
            </div>
            <!-- <h1 class="brand-title">IvanPig's Blog</h1>-->
            <h2 class="brand-tagline">IvanPig's Blog</h2>

            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="pure-button" href="/Timing">时间轴</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="/tag">标签库</a>
                    </li>
                    <!--<li class="nav-item">
                        <a class="pure-button" href="/1">收藏站</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="/1">音乐屋</a>-->

                </ul>
            </nav>
            <div class="search">
                <form action="/search">
                    <input type="text" class="search-query" placeholder="Search Blog" name="query" title="全站搜索-只支持英文">
                </form>
            </div>
            <div id="toc"></div>
            <nav id="nav">
                <ul class="nav-list">
                    <li class="nav-link">
                    <a class="weibo "  href="http://weibo.com/1686537657/profile?topnav=1&wvr=6" ><i class="fa fa-weibo fa-2x"></i></a>
                    </li>
                    <li class="nav-link">
                    <a class="github" href="https://github.com/ivanpig"><i class="fa fa-github fa-2x"></i></a>
                    </li>
                    <li class="nav-link">
                    <a class="rss" href="/rss.xml" ><i class="fa fa-rss fa-2x"></i></a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <!--[if lt IE 8]>
        <i class="label label-danger">亲爱的用户，您的浏览器版本过低，建议您升级浏览器获得更好的用户体验</i>
        <![endif]-->
        <div>
            <div class="posts">

                


    <section class="post">
        <header class="post-header">
            <img class="post-avatar" height="48" width="48"
                 src="">

            <h2 class="post-title"><a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25e7%25ad%2596%25e7%2595%25a5%25e6%25a8%25a1%25e5%25bc%258f.html">Pig设计模式:策略模式</a></h2>

            <p class="post-meta">By 10月07日  2011  



 
<a class="post-categorybut " href="/type/#设计模式"><i class="fa fa-folder-open"></i> 设计模式 (17)</a>


  



		  
			 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> design pattern (15)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> strategy (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 策略模式 (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 设计模式 (17)</a>

		  
		  
		  

            </p>
        </header>

        <div class="post-description">
            <p>策略模式的结构很简单，其实就是面向接口编程。具体是对其的理解。</p>
<p><a href="http://www.ivanpig.com/blog/wp-content/uploads/2011/10/Strategy.gif"><img class="alignnone size-medium wp-image-186" title="Strategy" src="assets/Strategy-300x103.gif" alt="" width="450" height="203" /></a></p>
<p>我对策略模式的理解是：策略模式将一个个的具体策略（逻辑、算法或行为）封装到了一个个的子类中，而由用户（客户端）自己决定调用哪个策略！换一种说法，策略模式将逻辑从服务端提到了客户端，本来由服务器端来判断的事情交由客户端自己决定，服务器端只提供应有的功能。就像给你积木，让你自己搭积木一样。<br />
举个简单的例子，写个简单计算器，可能会这么写：</p>
<pre class="brush:java">
//判断符号，来决定做怎样的计算。这就导致了，当添加新计算逻辑的时候，此类要不断维护
if(type.equals("+")) return a+b;
else if(type.equals("-")) return a-b;
....

//而策略模式将加减乘除封装到一个个的类中
public class AddStrategy implements Strategy{
     public double caculate(double a,double b){
           return a + b;
     }
}

//当调用时，比如当按下了界面上的+按钮，则将AddStrategy设置给客户类
client.setStrategy(new AddStrategy());
return client.result();    //result方法委托caculate方法即可
</pre>
<p>当需要再添加新算法时，添加相应的子类即可（当然了，客户端还是要修改的）！</p>



            <a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25e7%25ad%2596%25e7%2595%25a5%25e6%25a8%25a1%25e5%25bc%258f.html" class="post-categorybut">阅读全文</a>
        </div>
    </section>




    <section class="post">
        <header class="post-header">
            <img class="post-avatar" height="48" width="48"
                 src="">

            <h2 class="post-title"><a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e8%25bf%25ad%25e4%25bb%25a3%25e5%2599%25a8%25e6%25a8%25a1%25e5%25bc%258f.html">Pig设计模式：迭代器模式</a></h2>

            <p class="post-meta">By 10月06日  2011  



 
<a class="post-categorybut " href="/type/#设计模式"><i class="fa fa-folder-open"></i> 设计模式 (17)</a>


  



		  
			 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> design pattern (15)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> iterator (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 设计模式 (17)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 迭代器模式 (1)</a>

		  
		  
		  

            </p>
        </header>

        <div class="post-description">
            <p>     和原型模式一样，迭代器模式也基本不需要自己实现了，Java中提供了Iterator接口，可直接实现迭代器。迭代器模式也非常简单，就是为不同的集合统一遍历接口。<br />
     这里看下Java中迭代器的实现代码，以ArrayList为例。</p>
<pre class="brush:java">
//ArrayList实现了List接口
public class ArrayList<e> extends AbstractList<e>
        implements List<e>, RandomAccess, Cloneable, java.io.Serializable

//List继承了Collection
public interface List<e> extends Collection<e>

//Collection继承了Iterable接口
public interface Collection<e> extends Iterable<e>

//Iterable只有一个方法，就是返回Iterator对象，Iterator对象的作用就是对List的遍历
 public interface Iterable<t> {
    Iterator<t> iterator();
}

//ArrayList里面实现了此iterator()方法，如下
 public Iterator<e> iterator() {
        return new Itr();
    }

//而Itr是ArrayList的内部类，且这个内部类实现了Iterator接口，实现对ArrayList遍历的具体方法
 private class Itr implements Iterator<e> {
        int cursor;       // index of next element to return
        int lastRet = -1; // index of last element returned; -1 if no such
        int expectedModCount = modCount;

        public boolean hasNext() {
            return cursor != size;
        }

        @SuppressWarnings("unchecked")
        public E next() {
            checkForComodification();
            int i = cursor;
            if (i >= size)
                throw new NoSuchElementException();
            Object[] elementData = ArrayList.this.elementData;
            if (i >= elementData.length)
                throw new ConcurrentModificationException();
            cursor = i + 1;
            return (E) elementData[lastRet = i];
        }

        public void remove() {
            if (lastRet < 0)
                throw new IllegalStateException();
            checkForComodification();

            try {
                ArrayList.this.remove(lastRet);
                cursor = lastRet;
                lastRet = -1;
                expectedModCount = modCount;
            } catch (IndexOutOfBoundsException ex) {
                throw new ConcurrentModificationException();
            }
        }

        final void checkForComodification() {
            if (modCount != expectedModCount)
                throw new ConcurrentModificationException();
        }
    }
</e></e></t></t></e></e></e></e></e></e></e></pre>
<p>    所以整体结构是这样的。集合类实现了Iterable接口，返回一个Iterator对象，这个对象针对此集合类实现遍历方法。</p>



            <a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e8%25bf%25ad%25e4%25bb%25a3%25e5%2599%25a8%25e6%25a8%25a1%25e5%25bc%258f.html" class="post-categorybut">阅读全文</a>
        </div>
    </section>




    <section class="post">
        <header class="post-header">
            <img class="post-avatar" height="48" width="48"
                 src="">

            <h2 class="post-title"><a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e5%258e%259f%25e5%259e%258b%25e6%25a8%25a1%25e5%25bc%258f.html">Pig设计模式：原型模式</a></h2>

            <p class="post-meta">By 10月06日  2011  



 
<a class="post-categorybut " href="/type/#设计模式"><i class="fa fa-folder-open"></i> 设计模式 (17)</a>


  



		  
			 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> design pattern (15)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> prototype (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 原型模式 (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 设计模式 (17)</a>

		  
		  
		  

            </p>
        </header>

        <div class="post-description">
            <p>原型模式的作用就是拷贝，也可以叫克隆。克隆出一个和原实例一模一样的实例。在Java中就是实现Cloneable接口。Apache的commons项目，里面有个BeanUtils，也可以实现拷贝（不过需要注意的是，BeanUtils是浅拷贝）。所以原型模式直接用就可以了。<br />
原型模式的拷贝，可以分为浅拷贝和深拷贝，看下代码就清楚了。</p>
<pre class="brush:java">//浅拷贝
public class A implements Cloneable{

	private String str;
	private B b;

	public void setStr(String str){
		this.str = str;
	}

	public String getStr(){
		return str;
	}

    public B getB() {
		return b;
	}

	public void setB(B b) {
		this.b = b;
	}

	@Override
	protected Object clone(){
		A a = null;
		try {
			a = (A) super.clone();
		} catch (CloneNotSupportedException e) {
			e.printStackTrace();
		}
		return a;
	}

	public static void main(String[] args) {
		A a = new A();
		a.setStr("Hello");
		B b = new B();
		b.setStr("Hello B");
		a.setB(b);
		System.out.println("a-str:" + a.getStr());
		System.out.println("a-b:" + a.getB().getStr());
		A ac = null;
		ac = (A) a.clone();
		System.out.println("ac-str:" + ac.getStr());
		System.out.println("ac-b:" + ac.getB().getStr());

		a.setStr("Hello A");
		b.setStr("Hello BB");
		a.setB(b);

		System.out.println("a-str:" + a.getStr());
		System.out.println("a-b:" + a.getB().getStr());
		System.out.println("ac-str:" + ac.getStr());
		System.out.println("ac-b:" + ac.getB().getStr());
	}
}

public class B{
     private String str;

	public String getStr() {
		return str;
	}

	public void setStr(String str) {
		this.str = str;
	}
}

//输出结果
/*
a-str:Hello
a-b:Hello B
ac-str:Hello
ac-b:Hello B
a-str:Hello A
a-b:Hello BB
ac-str:Hello
ac-b:Hello BB       --浅拷贝导致了，ac和a中的B是相同的引用，a中的b被修改后，ac中的b也被修改，这应该是不想要的结果
                    --所以需要深拷贝。深拷贝就是将所有涉及到的对象都进行Clone
*/</pre>
<pre class="brush:java">//深拷贝
public class A implements Cloneable{

	private String str;
	private B b;

	public void setStr(String str){
		this.str = str;
	}

	public String getStr(){
		return str;
	}

    public B getB() {
		return b;
	}

	public void setB(B b) {
		this.b = b;
	}

	@Override
	protected Object clone(){
		A a = null;
		try {
			a = (A) super.clone();
			a.b = (B) b.clone();       //此处对b进行clone
		} catch (CloneNotSupportedException e) {
			e.printStackTrace();
		}
		return a;
	}

	public static void main(String[] args) {
		A a = new A();
		a.setStr("Hello");
		B b = new B();
		b.setStr("Hello B");
		a.setB(b);
		System.out.println("a-str:" + a.getStr());
		System.out.println("a-b:" + a.getB().getStr());
		A ac = null;
		ac = (A) a.clone();
		System.out.println("ac-str:" + ac.getStr());
		System.out.println("ac-b:" + ac.getB().getStr());

		a.setStr("Hello A");
		b.setStr("Hello BB");
		a.setB(b);

		System.out.println("a-str:" + a.getStr());
		System.out.println("a-b:" + a.getB().getStr());
		System.out.println("ac-str:" + ac.getStr());
		System.out.println("ac-b:" + ac.getB().getStr());
	}
}

//B也要实现Cloneable并重写clone方法
public class B implements Cloneable{
     private String str;

	public String getStr() {
		return str;
	}

	public void setStr(String str) {
		this.str = str;
	}

	@Override
	protected Object clone() throws CloneNotSupportedException {
		return super.clone();
	}
}

//输出结果
/*
a-str:Hello
a-b:Hello B
ac-str:Hello
ac-b:Hello B
a-str:Hello A
a-b:Hello BB
ac-str:Hello
ac-b:Hello B        --此处a中的b被修改后，ac中的b不会被影响
*/</pre>
<p>可以直接实现Cloneable接口，而不用重写clone方法，默认就是浅拷贝。要自己实现原型模式的话也非常简单，手动在clone方法里面return一个新对象，再将自身的属性复制过去就行了，因为前面说了，原型模式基本不需要自己写了，也就不罗嗦了。</p>



            <a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e5%258e%259f%25e5%259e%258b%25e6%25a8%25a1%25e5%25bc%258f.html" class="post-categorybut">阅读全文</a>
        </div>
    </section>




    <section class="post">
        <header class="post-header">
            <img class="post-avatar" height="48" width="48"
                 src="">

            <h2 class="post-title"><a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e8%25a7%2582%25e5%25af%259f%25e8%2580%2585%25e6%25a8%25a1%25e5%25bc%258f.html">Pig设计模式：观察者模式</a></h2>

            <p class="post-meta">By 10月06日  2011  



 
<a class="post-categorybut " href="/type/#设计模式"><i class="fa fa-folder-open"></i> 设计模式 (17)</a>


  



		  
			 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> design pattern (15)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> observer (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 观察者模式 (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 设计模式 (17)</a>

		  
		  
		  

            </p>
        </header>

        <div class="post-description">
            <p>     我更愿意称观察者模式为通知模式，我觉得“通知模式”更能反应这个模式的主旨----你该干嘛干嘛去，有事我通知你！<br />
     此模式的最佳应用在哪里呢？3Q大战。我们来模拟一下！</p>
<pre class="brush:java">
//QQ Client
public interface QQ{
     public boolean login(String username,String password);
     public void popWin(String msg);
}

//QQ Server
public interface QQServer{

    private List<qq> list = new ArrayList(); 
    public void addQQ(QQ qq){
         list.add(qq);
    }

    public void popAll(String msg){
        for(QQ qq : list) qq.popWin(msg);
    }
}

//QQ实现
public class MyQQ implements QQ{
     public boolean login(String username,String password){
           //这里使用网络发送请求到QQServer，如果用户名密码正确，就调用addQQ方法,于是我们的QQ就上战场了
     }

     public void popWin(String msg){
          System.out.println(msg);
     }
}
</qq></pre>
<p>     这样，只要QQServer一做出"艰难的决定"，我们就都遭殃了！<br />
     当然，这只是一个模拟，真实代码就不得而知了！在Web中，这种模式也叫做“消息推送”。相对的客户端定时向服务器请求，叫“拉”模式。</p>



            <a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e8%25a7%2582%25e5%25af%259f%25e8%2580%2585%25e6%25a8%25a1%25e5%25bc%258f.html" class="post-categorybut">阅读全文</a>
        </div>
    </section>




    <section class="post">
        <header class="post-header">
            <img class="post-avatar" height="48" width="48"
                 src="">

            <h2 class="post-title"><a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e9%2580%2582%25e9%2585%258d%25e5%2599%25a8%25e6%25a8%25a1%25e5%25bc%258f.html">Pig设计模式：适配器模式</a></h2>

            <p class="post-meta">By 10月06日  2011  



 
<a class="post-categorybut " href="/type/#设计模式"><i class="fa fa-folder-open"></i> 设计模式 (17)</a>


  



		  
			 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> Adapter (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> design pattern (15)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 设计模式 (17)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 适配器模式 (1)</a>

		  
		  
		  

            </p>
        </header>

        <div class="post-description">
            <p>     适配器模式的作用就是将一个类的接口转换成另外一个接口。这种模式一般是用在使用已有系统的情况。<br />
     假设目前做一个新系统，有如下代码结构。</p>
<pre class="brush:java">
public interface Car{
     public void drive();
}

public class Benz implements Car{
     public void drive(){
          System.out.println("Benz run");
     }
}

public class Cruze implements Car{
     public void drive(){
          System.out.println("Cruze run");
     }
}
</pre>
<p>      有一个老系统，里面有如下代码</p>
<pre class="brush:java">
public class Smart{
     public void run(){
         System.out.println("Smart run");
     }
}
</pre>
<p>      很明显，Smart和Benz,Cruze不属于同类。而实际上Smart和Benz,Cruze一样都属于Car，怎么办呢？太简单了，继承阿。</p>
<pre class="brush:java">
public class SmartCar extends Smart implements Car{
      public void drive(){
           this.run();
      }
}
</pre>
<p>     搞定！So easy!这种方式叫做类的适配器。<br />
     但是，如果Car是个类，而不是接口呢？Java是不支持多继承的！依然很简单，组合嘛！</p>
<pre class="brush:java">
public class SmartCar implements Car{
     private Smart smart = new Smart();
 
     public void drive(){
          smart.run();
     }
}
</pre>
<p>     这种方式就叫做对象的适配器。很简单吧！</p>



            <a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e9%2580%2582%25e9%2585%258d%25e5%2599%25a8%25e6%25a8%25a1%25e5%25bc%258f.html" class="post-categorybut">阅读全文</a>
        </div>
    </section>




    <section class="post">
        <header class="post-header">
            <img class="post-avatar" height="48" width="48"
                 src="">

            <h2 class="post-title"><a href="/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/ubuntu10-04%25e6%2589%258b%25e5%258a%25a8%25e7%25bc%2596%25e8%25af%2591jdk7.html">Ubuntu10.04手动编译JDK7</a></h2>

            <p class="post-meta">By 10月04日  2011  



 
<a class="post-categorybut " href="/type/#技术相关"><i class="fa fa-folder-open"></i> 技术相关 (6)</a>


  



		  
			 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> jdk (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> make (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 编译 (1)</a>

		  
		  
		  

            </p>
        </header>

        <div class="post-description">
            <p><strong>一.环境准备</strong></p>
<p>1.Ubuntu10.04</p>
<p>2.JDK1.6最新版</p>
<p>3.Ant1.7.1以上</p>
<p>以上资源不需要多说了吧！</p>
<p>4.安装freetype。</p>
<p>此处<a href="http://download.savannah.gnu.org/releases/freetype/">http://download.savannah.gnu.org/releases/freetype/</a>下载freetype，解压缩。</p>
<p>make</p>
<p>./configure</p>
<p>sudo make install</p>
<p>搞定</p>
<p>5.安装ALSA</p>
<p>此处<a href="http://www.alsa-project.org/main/index.php/Main_Page">http://www.alsa-project.org/main/index.php/Main_Page</a>下载drivers和lib，解压缩。</p>
<p>./configure</p>
<p>make</p>
<p>sudo make install</p>
<p>6.安装CUPS</p>
<p>此处<a href="http://www.cups.org/">http://www.cups.org/</a>下载CUPS，解压缩。</p>
<p>./cofigure</p>
<p>make</p>
<p>sudo make install</p>
<p>此过程中可能会提示缺少g++，sudo apt-get install g++即可。</p>
<p><strong>二.开始</strong></p>
<p>1.到http://download.java.net/openjdk/jdk7/下载jdk7的源码，解压缩。</p>
<p>2.设置各种系统变量，sudo ect/profile</p>
<p>export ALT_BOOTDIR=/home/ivan/tools/jdk1.6.0_12<br />
export ALT_JDK_IMPORT_PATH=/home/ivan/tools/jdk1.6.0_12<br />
export ANT_HOME=/home/ivan/tools/apache-ant-1.8.2</p>
<p>同时将JAVA_HOME,CLASSPATH之类的全注释掉。</p>
<p>3.进入openjdk跟目录，make吧。</p>
<p><strong>三.参考文档</strong></p>
<p>openjdk根目录下的README-builds.html</p>



            <a href="/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/ubuntu10-04%25e6%2589%258b%25e5%258a%25a8%25e7%25bc%2596%25e8%25af%2591jdk7.html" class="post-categorybut">阅读全文</a>
        </div>
    </section>




    <section class="post">
        <header class="post-header">
            <img class="post-avatar" height="48" width="48"
                 src="">

            <h2 class="post-title"><a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e8%25a3%2585%25e9%25a5%25b0%25e6%25a8%25a1%25e5%25bc%258f.html">Pig设计模式：装饰模式</a></h2>

            <p class="post-meta">By 10月04日  2011  



 
<a class="post-categorybut " href="/type/#设计模式"><i class="fa fa-folder-open"></i> 设计模式 (17)</a>


  



		  
			 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> decorator (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> design pattern (15)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 装饰模式 (1)</a>
 
<a class="post-category " href="/tag/#"><i class="fa fa-tags"></i> 设计模式 (17)</a>

		  
		  
		  

            </p>
        </header>

        <div class="post-description">
            <p>代理模式可以说是给方法添加了新内容，而装饰模式则是给类添加了新的方法。<br />
大家都知道要添加新方法，自然会想到继承，但是继承的耦合性高。装饰模式是使用组合的方式给类添加新的方法。Java中最典型的应用就是IO库了。<br />
JavaIO库的使用可能如下</p>
<pre class="brush:java">
BufferedInputStream bi = new BufferedInputStream(new FileInputStream(filename));
</pre>
<p>我们都知道FileInputStream是用来读取文件的，BufferedInputStream是提供了缓存的能力。我们分别看下他们的源代码</p>
<pre class="brush:java">
public class BufferedInputStream extends FilterInputStream
...

public class FilterInputStream extends InputStream
...

public class FileInputStream extends InputStream
...
</pre>
<p>BufferedInputStream继承了FilterInputStream，FilterInputStream和FileInputStream一样都继承自InputStream.可以看出InputStream是公共父类。FilterInputStream是装饰类的公共父类，看看FilterInputStream的源代码就知道了，他只是做了简单的方法委托。BufferedInputStream继承了FilterInputStream，并添加了缓存的方法（其实就是用一个字节数组保存字节，一次性读出）。<br />
装饰模式的结构很简单，装饰类和被装饰类都要继承相同的父类（或实现相同的接口），装饰类持有被装饰类的实例，相同的方法只是简单的委托，在装饰类里面添加新方法即可。<br />
装饰模式是为了解决过多且能自由组合的情况。例如HeadFirst设计模式里面举的例子，咖啡加糖，或者奶，或者即加糖也加奶，组合很多，用继承就会子类爆炸。</p>



            <a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/pig%25e8%25ae%25be%25e8%25ae%25a1%25e6%25a8%25a1%25e5%25bc%258f%25ef%25bc%259a%25e8%25a3%2585%25e9%25a5%25b0%25e6%25a8%25a1%25e5%25bc%258f.html" class="post-categorybut">阅读全文</a>
        </div>
    </section>


<div class="pure-g pagination">
    
    
    <a class=" pure-u-1-2 pagination-item" href="/page/12"><p>← Newer</p></a>
    
    


    
    <a class=" pure-u-1-2 pagination-item" href="/page/14"><p>Older →</p></a>
    
</div>








            </div>
            </div>
        <div class="footer">
                <a href="/love/welcome-my-blog.html">About</a>
                 <a href="/1">Collecting</a>
                <a href="tencent://message/?uin=561802774">QQ</a>
                <a href="https://github.com/ivanpig">GitHub</a>
            <script src="/js/min/nprogress.min.js"></script>
            <script src="/js/index.js"></script>
        </div>
        <div class="topfade"><a href="javascript:;" title="返回顶部"></a></div>

    </div>

</div>

</body>

</html>
