<!DOCTYPE html>
<html lang="en" slick-uniqueid="3">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Asciidoctor 1.5.1">
    <meta name="author" content="Andrey Antukh, &lt;niwi@niwi.be&gt;">
    <title></title>
    <link rel="stylesheet" href="/css/simple/font-awesome.css"/>
    <link rel="stylesheet" href="/css/simple/simple.css"/>
    <link rel="stylesheet" href="/css/simple/highliight.css"/>
    <script src="/js/min/jquery-1.7.2.min.js"></script>
    <style>
        h1 {
            font-size: 1.5em;
        }
    </style>
</head>
<body class="article toc2 toc-left">
<div id="toc" class="toc2">
    <div class="headerpic">
        <a href="/">
            <img id="_home" src="/img/head.jpg" alt="Profile Picture" style="width: 100px;" title="返回首页">
        </a>
        <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)"
            width="90%" color="#ccc" size="1/">

        <p class="post-meta">
            <a class="pure-button" href="/Timing">时间轴</a>
            <a class="pure-button" href="/tag">标签库</a>
            <a class="pure-button" href="/type">分类库</a>
        </p>
        <p class="post-meta">
            <form action="/search">
                <input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="搜索">
            </form>
        </p>
        <div>
            <img src="/img/qrcode.jpg" width="170">
        </div>
    </div>
</div>
<div id="content">
    




























<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/02/22/mediator.html">语言与模式-20中介者模式</a></h2>

        <p class="post-meta">By    2015年02月22日
            
            
            
            
            <a class="post-categorybut " href="/type/#designpattern"><i class="fa fa-folder-open">designpattern (23)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">designpattern (23)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">clojure (55)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <h1>意图</h1>

<p>用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</p>

<p><img src="/assets/designpattern/mediator.jpg" alt="" /></p>

<h1>适用性</h1>

<ul>
<li>一组对象以定义良好但是复杂的方式进行通信。产生的相互依赖关系结构混乱且难以理解。</li>
<li>一个对象引用其他很多对象并且直接与这些对象通信,导致难以复用该对象。</li>
<li>想定制一个分布在多个类中的行为，而又不想生成太多的子类。</li>
</ul>


<h1>Java实现</h1>

<pre><code class="java">//抽象同事类
public abstract class Person {
    // 维持一个抽象中介者的引用
    protected Mediator mediator;

    protected String name;

    public Person(String name, Mediator mediator){
        this.mediator = mediator;
        this.name = name;
    }

    /**
     * 设置中介者对象
     * @param mediator
     */
    public void setMediator(Mediator mediator){
        this.mediator = mediator;
    }

    /**
     * 向中介 发送消息
     */
    protected abstract void sendMessage(String msg);

    /**
     * 从中介 获取消息
     */
    protected abstract void getMessage(String msg);
}
</code></pre>




    <a href="/2015/02/22/mediator.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/02/21/strategy.html">语言与模式-19策略模式</a></h2>

        <p class="post-meta">By    2015年02月21日
            
            
            
            
            <a class="post-categorybut " href="/type/#designpattern"><i class="fa fa-folder-open">designpattern (23)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">designpattern (23)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">clojure (55)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <h1>意图</h1>

<p>定义一系列的算法,把它们一个个封装起来, 并且使它们可相互替换。本模式使得算法可独立于使用它的客户而变化。</p>

<p><img src="/assets/designpattern/strategy.jpg" alt="" /></p>

<h1>适用性</h1>

<ul>
<li>许多相关的类仅仅是行为有异。“策略”提供了一种用多个行为中的一个行为来配置一个类的方法。</li>
<li>需要使用一个算法的不同变体。例如，你可能会定义一些反映不同的空间/时间权衡的算法。当这些变体实现为一个算法的类层次时，可以使用策略模式。</li>
<li>算法使用客户不应该知道的数据。可使用策略模式以避免暴露复杂的、与算法相关的数据结构。</li>
<li>一个类定义了多种行为, 并且这些行为在这个类的操作中以多个条件语句的形式出现。将相关的条件分支移入它们各自的Strategy类中以代替这些条件语句。</li>
</ul>


<h1>Java实现</h1>

<pre><code class="java">public class Context {
    //持有一个具体策略的对象
    private Strategy strategy;
    /**
     * 构造函数，传入一个具体策略对象
     * @param strategy    具体策略对象
     */
    public Context(Strategy strategy){
        this.strategy = strategy;
    }
    /**
     * 策略方法
     */
    public void contextInterface(){
        strategy.strategyInterface();
    }
}
</code></pre>




    <a href="/2015/02/21/strategy.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/02/20/state.html">语言与模式-18状态模式</a></h2>

        <p class="post-meta">By    2015年02月20日
            
            
            
            
            <a class="post-categorybut " href="/type/#designpattern"><i class="fa fa-folder-open">designpattern (23)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">designpattern (23)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">clojure (55)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <h1>意图</h1>

<p>允许一个对象在其内部状态改变时改变它的行为。对象看起来似乎修改了它的类。</p>

<p><img src="/assets/designpattern/state.jpg" alt="" /></p>

<h1>适用性</h1>

<ul>
<li>一个对象的行为取决于它的状态, 并且它必须在运行时刻根据状态改变它的行为。</li>
<li>一个操作中含有庞大的多分支的条件语句，且这些分支依赖于该对象的状态。这个状态通常用一个或多个枚举常量表示。通常, 有多个操作包含这一相同的条件结构。State模式将每一个条件分支放入一个独立的类中。这使得你可以根据对象自身的情况将对象的状态作为一个对象，这一对象可以不依赖于其他对象而独立变化。</li>
</ul>


<h1>Java实现</h1>

<pre><code class="java">public class Order{
     private State unPayState;
     private State payedState;
     private State sendState;
     private State doneState;    //四种状态，四种类,对应的get,set方法省略

     private State state = unPayState;     //当前状态

     public Order(){
        unPayState = new UnPayState(this);
        payedState = new PayedState(this);            //传入Order对象，为了修改Order的状态
        ...
     }

     public void pay(){
          state.pay();
     }

     public void send(){
          state.send();
     }

     ....
}
</code></pre>




    <a href="/2015/02/20/state.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/02/19/command.html">语言与模式-17命令模式</a></h2>

        <p class="post-meta">By    2015年02月19日
            
            
            
            
            <a class="post-categorybut " href="/type/#designpattern"><i class="fa fa-folder-open">designpattern (23)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">designpattern (23)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">clojure (55)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <h1>意图</h1>

<p>将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可取消的操作</p>

<p><img src="/assets/designpattern/command.jpg" alt="" /></p>

<h1>适用性</h1>

<ul>
<li>像上面讨论的MenuItem对象那样，抽象出待执行的动作以参数化某对象。你可用过程语言中的回调（callback）函数表达这种参数化机制。所谓回调函数是指函数先在某处注册，而它将在稍后某个需要的时候被调用。Command模式是回调机制的一个面向对象的替代品。</li>
<li>在不同的时刻指定、排列和执行请求。一个Command对象可以有一个与初始请求无关的生存期。如果一个请求的接收者可用一种与地址空间无关的方式表达，那么就可将负责该请求的命令对象传送给另一个不同的进程并在那儿实现该请求。</li>
<li>支持取消操作。Command的Execute操作可在实施操作前将状态存储起来，在取消操作时这个状态用来消除该操作的影响。Command接口必须添加一个Execute操作，该操作取消上一次Execute调用的效果。执行的命令被存储在一个历史列表中。可通过向后和向前遍历这一列表并分别调用Unexecute和Execute来实现重数不限的“取消”和“重做”。</li>
<li>支持修改日志，这样当系统崩溃时，这些修改可以被重做一遍。在Command接口中添加装载操作和存储操作，可以用来保持变动的一个一致的修改日志。从崩溃中恢复的过程包括从磁盘中重新读入记录下来的命令并用Execute操作重新执行它们。</li>
<li>用构建在原语操作上的高层操作构造一个系统。这样一种结构在支持事务（Transaction）的信息系统中很常见。一个事务封装了对数据的一组变动。Command模式提供了对事务进行建模的方法。Command有一个公共的接口，使得你可以用同一种方式调用所有的事务。同时使用该模式也易于添加新事务以扩展系统。</li>
</ul>


<h1>Java实现</h1>

<p>接收者角色类</p>

<pre><code class="java">public class Receiver {
    /**
     * 真正执行命令相应的操作
     */
    public void action(){
        System.out.println("执行操作");
    }
}
</code></pre>

<p>抽象命令角色类</p>

<pre><code class="java">public interface Command {
    /**
     * 执行方法
     */
    void execute();
}
</code></pre>




    <a href="/2015/02/19/command.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/02/18/chain_of_responsibility.html">语言与模式-16责任链模式</a></h2>

        <p class="post-meta">By    2015年02月18日
            
            
            
            
            <a class="post-categorybut " href="/type/#designpattern"><i class="fa fa-folder-open">designpattern (23)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">designpattern (23)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">clojure (55)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <h1>意图</h1>

<p>使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这些对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它为止。</p>

<p><img src="/assets/designpattern/chain.jpg" alt="" /></p>

<h1>适用性</h1>

<ul>
<li>有多个的对象可以处理一个请求，哪个对象处理该请求运行时刻自动确定。</li>
<li>你想在不明确指定接收者的情况下，向多个对象中的一个提交一个请求。</li>
<li>可处理一个请求的对象集合应被动态指定。</li>
</ul>


<h1>Java实现</h1>

<pre><code class="java">public abstract class Handler {

    protected Handler successor;

    public abstract void handlerRequest(String condition);


    public Handler getSuccessor() {
        return successor;
    }
    public void setSuccessor(Handler successor) {
        this.successor = successor;
    }
</code></pre>




    <a href="/2015/02/18/chain_of_responsibility.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/02/17/observer.html">语言与模式-15观察者模式</a></h2>

        <p class="post-meta">By    2015年02月17日
            
            
            
            
            <a class="post-categorybut " href="/type/#designpattern"><i class="fa fa-folder-open">designpattern (23)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">designpattern (23)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">clojure (55)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <h1>意图</h1>

<p>定义对象间的一种一对多的依赖关系,当一个对象的状态发生改变时, 所有依赖于它的对象都得到通知并被自动更新。</p>

<p><img src="/assets/designpattern/observer.jpg" alt="" /></p>

<h1>适用性</h1>

<ul>
<li>当一个抽象模型有两个方面, 其中一个方面依赖于另一方面。将这二者封装在独立的对象中以使它们可以各自独立地改变和复用。</li>
<li>当对一个对象的改变需要同时改变其它对象, 而不知道具体有多少对象有待改变。</li>
<li>当一个对象必须通知其它对象，而它又不能假定其它对象是谁。换言之，你不希望这些对象是紧密耦合的。</li>
</ul>


<h1>Java实现</h1>

<pre><code class="java">public abstract class Subject {
    /**
     * 用来保存注册的观察者对象
     */
    private    List&lt;Observer&gt; list = new ArrayList&lt;Observer&gt;();
    /**
     * 注册观察者对象
     * @param observer    观察者对象
     */
    public void attach(Observer observer){

        list.add(observer);
        System.out.println("Attached an observer");
    }
    /**
     * 删除观察者对象
     * @param observer    观察者对象
     */
    public void detach(Observer observer){

        list.remove(observer);
    }
    /**
     * 通知所有注册的观察者对象
     */
    public void nodifyObservers(String newState){

        for(Observer observer : list){
            observer.update(newState);
        }
    }
}
</code></pre>




    <a href="/2015/02/17/observer.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/02/16/memento.html">语言与模式-14备忘录模式</a></h2>

        <p class="post-meta">By    2015年02月16日
            
            
            
            
            <a class="post-categorybut " href="/type/#designpattern"><i class="fa fa-folder-open">designpattern (23)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">designpattern (23)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">clojure (55)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <h1>意图</h1>

<p>在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到保存的状态。</p>

<p><img src="/assets/designpattern/memento.jpg" alt="" /></p>

<h1>适用性</h1>

<ul>
<li>必须保存一个对象在某一个时刻的(部分)状态, 这样以后需要时它才能恢复到先前的状态。</li>
<li>如果一个用接口来让其它对象直接得到这些状态，将会暴露对象的实现细节并破坏对象的封装性。</li>
</ul>


<h1>Java实现</h1>

<pre><code class="java">public class Memento {

    private String state;

    public Memento(String state){
        this.state = state;
    }

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }
}
</code></pre>




    <a href="/2015/02/16/memento.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>




<table class="tableblock frame-all grid-all spread">
    <colgroup>
        <col style="width: 50%;">
        <col style="width: 50%;">
    </colgroup>
    <tbody>
    <tr>
        <td class="tableblock valign-middle halign-center valign-top disablelink">
        
        
        <a class=" pure-u-1-2 pagination-item" href="/page/3"><i class="fa fa-mail-reply"></i> Newer</a>
        
        
            </td>

        <td class="tableblock valign-middle halign-center valign-top disablelink">
        
        <a class=" pure-u-1-2 pagination-item" href="/page/5">Older <i class="fa fa-mail-forward"></i></a>
        
            </td>

    </tr>
    </tbody>
</table>




</div>

<div id="footer">
    <div id="footer-text">
        <a href="/about.html">About</a>
        <a href="tencent://message/?uin=561802774">QQ</a>
        <a href="https://github.com/ivanpig">GitHub</a><br>
        © 2015 IvanEye
    </div>
</div>

</body>
</html>