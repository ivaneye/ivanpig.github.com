<!DOCTYPE html>
<html lang="en" slick-uniqueid="3">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Asciidoctor 1.5.1">
    <meta name="author" content="Andrey Antukh, &lt;niwi@niwi.be&gt;">
    <title></title>
    <link rel="stylesheet" href="/css/simple/font-awesome.css"/>
    <link rel="stylesheet" href="/css/simple/simple.css"/>
    <link rel="stylesheet" href="/css/simple/highliight.css"/>
    <script src="/js/min/jquery-1.7.2.min.js"></script>
    <style>
        h1 {
            font-size: 1.5em;
        }
    </style>
</head>
<body class="article toc2 toc-left">
<div id="toc" class="toc2">
    <div class="headerpic">
        <a href="/">
            <img id="_home" src="/img/head.jpg" alt="Profile Picture" style="width: 100px;" title="返回首页">
        </a>
        <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)"
            width="90%" color="#ccc" size="1/">

        <p class="post-meta">
            <a class="pure-button" href="/Timing">时间轴</a>
            <a class="pure-button" href="/tag">标签库</a>
            <a class="pure-button" href="/type">分类库</a>
        </p>
        <p class="post-meta">
            <form action="/search">
                <input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="搜索">
            </form>
        </p>
        <div>
            <img src="/img/qrcode.jpg" width="170">
        </div>
    </div>
</div>
<div id="content">
    




























<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/04/16/use-junit4.html">读源码-JUnit4使用</a></h2>

        <p class="post-meta">By    2015年04月16日
            
            
            
            
            <a class="post-categorybut " href="/type/#junit4"><i class="fa fa-folder-open">junit4 (2)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">opensource (6)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">junit4 (2)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <p><em>Level :</em> &hearts;</p>

<h1>JUnit4简介</h1>

<p>之前梳理了JUnit3，此篇将梳理JUnit4。</p>

<p>JUnit4主要引入了注解。我们依然使用之前的例子来进行测试</p>

<h1>场景</h1>

<p>假设，我们有一个Person类</p>

<ul>
<li>包含两个方法say和sayHi</li>
<li>两个方法都接收一个String类型的参数</li>
<li>say返回"Hello,"+arg</li>
<li>sayHi返回"Hi,"+arg</li>
</ul>


<p>代码如下:</p>

<pre><code class="java">package org.ivan;

public class Person {

    public String say(String name) {
        return "Hello," + name;
    }

    public String sayHi(String name) {
        return "Hi," + name;
    }
}
</code></pre>

<p>在JUnit4中如何进行测试呢?</p>

<h1>引入JUnit</h1>

<p>首先还是引入JUnit4</p>

<pre><code class="xml">&lt;dependency&gt;
  &lt;groupId&gt;junit&lt;/groupId&gt;
  &lt;artifactId&gt;junit&lt;/artifactId&gt;
  &lt;version&gt;4.12&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>




    <a href="/2015/04/16/use-junit4.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/04/08/junit3-design.html">读源码-JUnit3设计</a></h2>

        <p class="post-meta">By    2015年04月08日
            
            
            
            
            <a class="post-categorybut " href="/type/#junit3"><i class="fa fa-folder-open">junit3 (3)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">opensource (6)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">junit3 (3)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <p><em>Level :</em> &hearts;&hearts;&hearts;</p>

<h1>内容回顾</h1>

<ul>
<li>主要梳理了JUnit3的源码</li>
</ul>


<p>本篇主要说明JUnit3的代码设计及为什么这样设计！</p>

<h1>run方法</h1>

<p>上篇提出了两个问题！第一个问题是:为什么Test中的run方法要传入一个TestResult，然后再将自身传递给TestResult去执行呢？</p>

<p>首先从名字可以看出,TestResult类是用来保存测试结果的。实际上是对测试提供了一个统一的收集测试结果的对象。这实际上是个设计模式，叫Collecting Parameter模式。</p>

<h2>Collecting Parameter模式定义</h2>

<p>当你需要从几个方法中收集结果时，你应当给方法增加一个参数，并传递一个会替你收集参数的对象。</p>

<p>TestResult就是这样一个对象，它收集的结果可以方便在各个终端显示。</p>

<h1>runProtected方法</h1>

<p>上篇第二个问题:</p>

<p>为什么TestResult的run()方法中，要先实例化一个Protectable对象，而不直接调用test的runBare方法呢？</p>

<p>实际上，这主要是为了规避代码重复!</p>

<p>查看源码，我们可以看到TestSetup类中的run方法，也实例化一个Protectable对象，继而进行调用。</p>

<pre><code class="java">public void run(final TestResult result) {
  Protectable p= new Protectable() {
    public void protect() throws Exception {
      setUp();
      basicRun(result);
      tearDown();
    }
  };
  result.runProtected(this, p);
}
</code></pre>

<p>在这里，Protectable中封装了不同的执行逻辑，然后传递给runProtected方法来执行。</p>




    <a href="/2015/04/08/junit3-design.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/04/07/junit3-implements.html">读源码-JUnit3实现</a></h2>

        <p class="post-meta">By    2015年04月07日
            
            
            
            
            <a class="post-categorybut " href="/type/#junit3"><i class="fa fa-folder-open">junit3 (3)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">opensource (6)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">junit3 (3)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <p><em>Level :</em> &hearts;&hearts;</p>

<h1>内容回顾</h1>

<ul>
<li>上篇内容主要介绍了JUnit3的使用</li>
<li>如何编写测试类</li>
<li>如何运行单个测试类</li>
<li>如何运行多个测试类</li>
<li>如何设置Class级别的setUp()和tearDown()方法</li>
<li>如何多次运行测试</li>
</ul>


<p>本篇文章将梳理JUnit3源码</p>

<h1>代码结构</h1>

<p>上篇最后给出了测试UML图</p>

<p><img src="/assets/opensource/junit3/diagram2.png" alt="" /></p>

<p>我们可以看出</p>

<ul>
<li>所有的测试类都继承了TestCase这个类</li>
<li>TestCase这个类继承了Assert类，实现了Test接口</li>
</ul>


<h1>Assert类</h1>

<p>我们先看Assert这个类，你会发现这个类很简单，提供了各种静态的assert*()方法来进行比较。</p>

<h1>Test接口</h1>

<pre><code class="java">package junit.framework;

public interface Test {
    public abstract int countTestCases();
    public abstract void run(TestResult result);
}
</code></pre>




    <a href="/2015/04/07/junit3-implements.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/04/06/use-junit3.html">读源码-JUnit3使用</a></h2>

        <p class="post-meta">By    2015年04月06日
            
            
            
            
            <a class="post-categorybut " href="/type/#junit3"><i class="fa fa-folder-open">junit3 (3)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">opensource (6)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">junit3 (3)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <p><em>Level :</em> &hearts;</p>

<h1>JUnit简介</h1>

<p>JUnit是一个Java语言的单元测试框架。它由Kent Beck和Erich Gamma建立，逐渐成为源于Kent Beck的sUnit的xUnit家族中最为成功的一个。</p>

<p>JUnit测试是程序员测试，即所谓白盒测试，因为程序员知道被测试的软件如何（How）完成功能和完成什么样（What）的功能。</p>

<h1>场景</h1>

<p>假设，我们有一个Person类</p>

<ul>
<li>包含两个方法say和sayHi</li>
<li>两个方法都接收一个String类型的参数</li>
<li>say返回"Hello,"+arg</li>
<li>sayHi返回"Hi,"+arg</li>
</ul>


<p>代码如下:</p>

<pre><code class="java">package org.ivan;

public class Person {

    public String say(String name) {
        return "Hello," + name;
    }

    public String sayHi(String name) {
        return "Hi," + name;
    }
}
</code></pre>

<p>如何保证方法返回了正确的值？</p>

<p>当然，你可以使用main方法，代码如下:</p>

<pre><code class="java">public static void main(String[] args){
  Person p = new Person();
  System.out.println("test Person.say" + ("Hello,Ivan".equals(p.say("Ivan"))));
  System.out.println("test Person.sayHi" + ("Hi,Ivan".equals(p.sayHi("Ivan"))));
}
</code></pre>




    <a href="/2015/04/06/use-junit3.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/04/01/java_webframework.html">自用Java开发框架</a></h2>

        <p class="post-meta">By    2015年04月01日
            
            
            
            
            <a class="post-categorybut " href="/type/#mycode"><i class="fa fa-folder-open">mycode (2)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">java (50)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">framework (1)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <p>框架结构图</p>

<p><img src="/mind/framework.png" alt="" /></p>

<p><a href="https://github.com/ivanpig/pig-template">源码下载</a></p>



    <a href="/2015/04/01/java_webframework.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/04/01/book_review.html">如何读书相关书籍书评</a></h2>

        <p class="post-meta">By    2015年04月01日
            
            
            
            
            <a class="post-categorybut " href="/type/#book"><i class="fa fa-folder-open">book (1)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">book (1)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">review (1)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <h1>《杠杆阅读术》</h1>

<p>讲述读书的方法:</p>

<ul>
<li>主要针对商业书籍</li>
<li>一天一本(非技术性很强的书，一天一本难度不大)</li>
<li>先阅读序言，目录以及结尾，确认图书编写目的，带着目的去读</li>
<li>不要一页一页读，吸收20%即可，没读完也没关系(强迫症患者比较有难度)</li>
<li>重要的是实践</li>
</ul>


<p>对个人而言，一是不要纠结于细节(当然是针对非技术性书籍)，不要强迫自己非要全部看完.</p>

<p><em>看一类书，如果多本书中都提到了类似的观点，则需要注意。</em></p>

<p><em>对书中的知识要进行实践。</em></p>

<h1>《书都不会读，你还想成功》</h1>

<p>和《杠杆阅读术》类似,如果读过上一本，此本可忽略！</p>



    <a href="/2015/04/01/book_review.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>






<section class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/2015/03/16/jvm.html">一图胜千言:JVM</a></h2>

        <p class="post-meta">By    2015年03月16日
            
            
            
            
            <a class="post-categorybut " href="/type/#xmind"><i class="fa fa-folder-open">xmind (2)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">xmind (2)</i></a>
            
            <a class="post-category " href="/tag/#"><i class="fa fa-tags">jvm (1)</i></a>
            
            
        
        

    </p>
</header>

<div class="post-description">
    <p><a href="/mind/jvm.xmind">xmind文件下载</a></p>




    <a href="/2015/03/16/jvm.html" class="post-readmore">阅读全文</a>
    <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
</div>
</section>




<table class="tableblock frame-all grid-all spread">
    <colgroup>
        <col style="width: 50%;">
        <col style="width: 50%;">
    </colgroup>
    <tbody>
    <tr>
        <td class="tableblock valign-middle halign-center valign-top disablelink">
        
        
        <a class="pure-u-1-2 pagination-item" href="/"><i class="fa fa-mail-reply"></i> Newer</a>
        
        
            </td>

        <td class="tableblock valign-middle halign-center valign-top disablelink">
        
        <a class=" pure-u-1-2 pagination-item" href="/page/3">Older <i class="fa fa-mail-forward"></i></a>
        
            </td>

    </tr>
    </tbody>
</table>




</div>

<div id="footer">
    <div id="footer-text">
        <a href="/about.html">About</a>
        <a href="tencent://message/?uin=561802774">QQ</a>
        <a href="https://github.com/ivanpig">GitHub</a><br>
        © 2015 IvanEye
    </div>
</div>

</body>
</html>