<!DOCTYPE html>
<html lang="en" slick-uniqueid="3"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Asciidoctor 1.5.1">
    <meta name="author" content="Andrey Antukh, &lt;niwi@niwi.be&gt;">
    <title>快学Scala习题解答—第五章 类 - </title>
    <link rel="stylesheet" href="/css/simple/font-awesome.css"/>
    <link rel="stylesheet" href="/css/simple/simple.css"/>
    <link rel="stylesheet" href="/css/simple/highliight.css"/>
    <script src="/js/min/jquery-1.7.2.min.js"></script>
</head>
<body class="article toc2 toc-left">
<div id="header">
    <h1>快学Scala习题解答—第五章 类</h1>
    <div class="details">
        <p class="post-meta">By  &nbsp;&nbsp;&nbsp; 2013 年 03月07日
            &nbsp;&nbsp;&nbsp;
            
            
            
            
            <a class="post-categorybut " href="/type/#"><i class="fa fa-folder-open">&nbsp;scala (15)</i></a>
            
            
            

            
            
            
            
            <a class="post-category " href="/tag/#java"><i class="fa fa-tags">&nbsp;java (50)</i></a>
            
            <a class="post-category " href="/tag/#java"><i class="fa fa-tags">&nbsp;scala (15)</i></a>
            
            
        
        
    </div>
    <div id="toc" class="toc2">
        <div class="headerpic">
            <a href="/">
                <img  id="_home" src="/img/head.jpg" alt="Profile Picture" style="width: 100px;" title="返回首页">
            </a>
            <!--<div class="grcode"><i class="fa fa-qrcode"></i></div></div>-->
            <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="90%" color="#ccc" size="1/">
            <div id="toctitle">目录</div>

        </div>
    </div>
    <div id="content">
        <div class="qrcodeTable"></div>
<div class="article pure-u-22-24">
    <h1>类</h1>

<h2>改进5.1节的Counter类,让它不要在Int.MaxValue时变成负数</h2>

<p>加个判断就OK了</p>

<pre><code class="{.scala}">class Count{
  private var value = Int.MaxValue
  def increment(){if(value &lt; Int.MaxValue) value + 1 else value }
  def current = value
}
</code></pre>

<h2>编写一个BankAccount类，加入deposit和withdraw方法，和一个只读的balance属性</h2>

<pre><code class="{.scala}">class BankAccount(val balance:Int = 0){
  def deposit(){}
  def withdraw(){}
}
</code></pre>

<h2>编写一个Time类，加入只读属性hours和minutes，和一个检查某一时刻是否早于另一时刻的方法before(other:Time):Boolean。Time对象应该以new Time(hrs,min)方式构建。其中hrs以军用时间格式呈现(介于0和23之间)</h2>

<pre><code class="{.scala}">class Time(val hours:Int,val minutes:Int){

   def before(other:Time):Boolean={
     hours &lt; other.hours || (hours == other.hours &amp;&amp; minutes &lt; other.minutes)
   }

   override def toString():String={
     hours + " : " + minutes
   }
}
</code></pre>

<!-- more -->


<h2>重新实现前一个类中的Time类，将内部呈现改成午夜起的分钟数(介于0到24*60-1之间)。不要改变公有接口。也就是说，客户端代码不应因你的修改而受影响</h2>

<pre><code class="{.scala}"> class Time(val hours:Int,val minutes:Int){

   def before(other:Time):Boolean={
     hours &lt; other.hours || (hours == other.hours &amp;&amp; minutes &lt; other.minutes)
   }

   override def toString():String={
      hours * 60 + minutes
   }
 }
</code></pre>

<h2>创建一个Student类，加入可读写的JavaBeans属性name(类型为String)和id(类型为Long)。有哪些方法被生产？(用javap查看。)你可以在Scala中调用JavaBeans的getter和setter方法吗？应该这样做吗？</h2>

<p>生成了name(),name_=(),id(),id_=(),setName(),getName(),setId(),getId()
编写代码如下</p>

<pre><code class="{.scala}">import scala.reflect.BeanProperty

class Student{

    @BeanProperty var name:String = _
    @BeanProperty var id:Long = _
}
</code></pre>

<p>javap -c Student 后显示如下</p>

<pre><code class="{.example}">Compiled from "Student.scala"
public class Student extends java.lang.Object implements scala.ScalaObject{
public java.lang.String name();
  Code:
   0:   aload_0
   1:   getfield        #13; //Field name:Ljava/lang/String;
   4:   areturn

public void name_$eq(java.lang.String);
  Code:
   0:   aload_0
   1:   aload_1
   2:   putfield        #13; //Field name:Ljava/lang/String;
   5:   return

public void setName(java.lang.String);
  Code:
   0:   aload_0
   1:   aload_1
   2:   putfield        #13; //Field name:Ljava/lang/String;
   5:   return

public long id();
  Code:
   0:   aload_0
   1:   getfield        #19; //Field id:J
   4:   lreturn

public void id_$eq(long);
  Code:
   0:   aload_0
   1:   lload_1
   2:   putfield        #19; //Field id:J
   5:   return

public void setId(long);
  Code:
   0:   aload_0
   1:   lload_1
   2:   putfield        #19; //Field id:J
   5:   return

public long getId();
  Code:
   0:   aload_0
   1:   invokevirtual   #25; //Method id:()J
   4:   lreturn

public java.lang.String getName();
  Code:
   0:   aload_0
   1:   invokevirtual   #28; //Method name:()Ljava/lang/String;
   4:   areturn

public Student();
  Code:
   0:   aload_0
   1:   invokespecial   #34; //Method java/lang/Object."&lt;init&gt;":()V
   4:   return

}
</code></pre>

<h2>在5.2节的Person类中提供一个主构造器,将负年龄转换为0</h2>

<pre><code class="{.scala}">class Person(var age:Int){
  age = if(age &lt; 0) 0 else age
}
</code></pre>

<h2>编写一个Person类，其主构造器接受一个字符串，该字符串包含名字，空格和姓，如new Person("Fred Smith")。提供只读属性firstName和lastName。主构造器参数应该是var,val还是普通参数？为什么？</h2>

<p>必须为val。如果为var，则对应的此字符串有get和set方法，而Person中的firstName和lastName为只读的,所以不能重复赋值。如果为var则会重复赋值而报错</p>

<h2>创建一个Car类，以只读属性对应制造商，型号名称，型号年份以及一个可读写的属性用于车牌。提供四组构造器。每个构造器fc都要求制造商和型号为必填。型号年份和车牌可选，如果未填，则型号年份为-1，车牌为空串。你会选择哪一个作为你的主构造器？为什么？</h2>

<p>这个没太明白题意。。。</p>

<pre><code class="{.scala}">class Car(val maker:String,val typeName:String,val year:Int = -1,var carLice:String = ""){
}
</code></pre>

<h2>在Java,C#或C++重做前一个练习。Scala相比之下精简多少？</h2>

<p>这个就不写了。</p>

<h2>考虑如下的类</h2>

<pre><code class="{.scala}">class Employ(val name:String,var salary:Double){
    def this(){this("John Q. Public",0.0)}
}
</code></pre>

<p>重写该类,使用显示的字段定义，和一个缺省主构造器。你更倾向于使用哪种形式？为什么？</p>

<pre><code class="{.scala}">class Employ{
    val name:String = "John Q. Public"
    var salary:Double = 0.0
}
</code></pre>

<p>个人更喜欢第二种方式，简单明了。</p>

</div>


<table class="tableblock frame-all grid-all spread">
    <colgroup>
        <col style="width: 50%;">
        <col style="width: 50%;">
    </colgroup>
    <tbody>
    <tr>
        
        
        
        
        <td class="tableblock valign-middle halign-center valign-top"><a class="pure-u-1-2 pagination-item " href="/2013/03/06/scala_exercises_04.html" title="快学Scala习题解答—第四章 映射和元组 "><p> <i class="fa fa-mail-reply"></i>&nbsp;快学Scala习题解答—第四章 映射和元组</a></p></td>
        
        
        
        
        <td class="tableblock valign-middle halign-center valign-top"><a class="pure-u-1-2 pagination-item " href="/2013/03/08/scala_exercises_06.html" title="快学Scala习题解答—第六章 对象"><p>快学Scala习题解答—第六章 对象&nbsp;<i class="fa fa-mail-forward"></i></p></a></td>
        
        
    </tr>
    </tbody>
</table>

<img src="/img/alipay.png" height="156" width="156"/>

<script src="/js/simplepage.js" ></script>


<!--多说分享-->
<div class="ds-share" data-thread-key="/2013/03/07/scala_exercises_05" data-title="快学Scala习题解答—第五章 类" data-images="/img/head.jpg" data-url="http://www.ivaneye.com/2013/03/07/scala_exercises_05.html">
    <div class="ds-share-aside-right">
      <div class="ds-share-aside-inner">
      </div>
      <div class="ds-share-aside-toggle">分享到</div>
    </div>
</div>



<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/2013/03/07/scala_exercises_05" data-title="快学Scala习题解答—第五章 类" data-url="/2013/03/07/scala_exercises_05.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"ivanpig"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->







    </div>

    <div id="footer">
        <div id="footer-text">
            <a href="/about.html">About</a>
            <a href="tencent://message/?uin=561802774">QQ</a>
            <a href="https://github.com/ivanpig">GitHub</a><br>
            © 2015 IvanEye
        </div>
    </div>

</body>
</html>