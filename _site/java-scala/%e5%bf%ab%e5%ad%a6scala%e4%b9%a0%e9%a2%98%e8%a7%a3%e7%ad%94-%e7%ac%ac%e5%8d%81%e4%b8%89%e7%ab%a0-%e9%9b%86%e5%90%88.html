<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="keywords" content="java, scala"/>
    <meta name="author" content="liyouhai.com"> 
    <link rel="canonical" href="http://liyouhai.com/java-scala/%25e5%25bf%25ab%25e5%25ad%25a6scala%25e4%25b9%25a0%25e9%25a2%2598%25e8%25a7%25a3%25e7%25ad%2594-%25e7%25ac%25ac%25e5%258d%2581%25e4%25b8%2589%25e7%25ab%25a0-%25e9%259b%2586%25e5%2590%2588.html">
    <link href="http://liyouhai.com/rss.xml" title="RSS 2.0" type="application/rss+xml" rel="alternate"/>
    <link href="/img/favicon.ico" rel="icon" type="image/x-icon">
    <title>快学Scala习题解答—第十三章 集合 - IvanPig's Blog</title>
    <link rel="stylesheet" href="/css/min/pure-min.css">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/min/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/css/min/grids-responsive-min.css">
    <!--<![endif]-->

    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/JekyllPure-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/css/JekyllPure.css">
    <!--<![endif]-->

    <link href="/css/min/font-awesome.min.css" rel="stylesheet">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/min/font-awesome-ie7.min.css">
    <![endif]-->
    <script src="/js/min/jquery-1.7.2.min.js"></script>
    <!--
     /\_ \    __                         /\ \                __
     \//\ \  /\_\  __  __    ___   __  __\ \ \___      __   /\_\
       \ \ \ \/\ \/\ \/\ \  / __`\/\ \/\ \\ \  _ `\  /'__`\ \/\ \
        \_\ \_\ \ \ \ \_\ \/\ \L\ \ \ \_\ \\ \ \ \ \/\ \L\.\_\ \ \
        /\____\\ \_\/`____ \ \____/\ \____/ \ \_\ \_\ \__/.\_\\ \_\
        \/____/ \/_/`/___/> \/___/  \/___/   \/_/\/_/\/__/\/_/ \/_/
                       /\___/
                       \/__/
     图像可以到http://asciigen.com/  生成..记得翻墙才能正常生成.如不方便可以博客留言我帮你生成
     -->
</head>

<body>







<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
            <div class="headerpic">
                <a href="/">
                    <img src="/img/op.jpg" alt="Profile Picture" style="width: 140px;" title="返回首页">
                </a>
            </div>
            <!-- <h1 class="brand-title">IvanPig's Blog</h1>-->
            <h2 class="brand-tagline">IvanPig's Blog</h2>

            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="pure-button" href="/Timing">时间轴</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="/tag">标签库</a>
                    </li>
                    <!--<li class="nav-item">
                        <a class="pure-button" href="/1">收藏站</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="/1">音乐屋</a>-->

                </ul>
            </nav>
            <div class="search">
                <form action="/search">
                    <input type="text" class="search-query" placeholder="Search Blog" name="query" title="全站搜索-只支持英文">
                </form>
            </div>
            <div id="toc"></div>
            <nav id="nav">
                <ul class="nav-list">
                    <li class="nav-link">
                    <a class="weibo "  href="http://weibo.com/1686537657/profile?topnav=1&wvr=6" ><i class="fa fa-weibo fa-2x"></i></a>
                    </li>
                    <li class="nav-link">
                    <a class="github" href="https://github.com/ivanpig"><i class="fa fa-github fa-2x"></i></a>
                    </li>
                    <li class="nav-link">
                    <a class="rss" href="/rss.xml" ><i class="fa fa-rss fa-2x"></i></a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <!--[if lt IE 8]>
        <i class="label label-danger">亲爱的用户，您的浏览器版本过低，建议您升级浏览器获得更好的用户体验</i>
        <![endif]-->
        <div>
            <div class="posts">

                <div class="qrcodeTable"></div>
<header class="post-header">
    <img class="post-avatar" height="48" width="48"
         src="">

    <h2 class="post-title">快学Scala习题解答—第十三章 集合</h2>

    <p class="post-meta">By 02月16日  2013  



 
<a class="post-categorybut " href="/type/#"><i class="fa fa-folder-open"></i> java-scala (20)</a>


  



		  
			 
<a class="post-category " href="/tag/#java"><i class="fa fa-tags"></i> java (16)</a>
 
<a class="post-category " href="/tag/#java"><i class="fa fa-tags"></i> scala (19)</a>

		  
		  
		  
</header>
<div class="article pure-u-22-24">
    <div class="outline-3" id="outline-container-14-1" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-1" style="margin: 5px 10px;">
		<span class="section-number-3">14.1</span>&nbsp;编写一个函数，给定字符串，产出一个包含所有字符的下标的映射。举例来说：indexes(&quot;Mississippi&quot;)应返回一个映射，让&#39;M&#39;对应集{0}，&#39;i&#39;对应集{1,4,7,10}，依此类推。使用字符到可变集的映射。另外，你如何保证集是经过排序的？<br />
	</h3>
<div class="outline-text-3" id="text-14-1">
<p style="margin: 5px 10px; text-indent: 40px;">
			更新scala到版本2.10.0。有可变的可排序的Set，实际上还是TreeSet
		</p>
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">import</span> collection.mutable.{Map,HashMap,SortedSet}

<span style="color: rgb(133, 153, 0);">def</span> <span style="color: rgb(38, 139, 210);">indexs</span>(<span style="color: rgb(38, 139, 210);">str</span>:<span style="color: rgb(181, 137, 0);">String</span>):<span style="color: rgb(181, 137, 0);">Map[Char,SortedSet[Int]]</span>={
  <span style="color: rgb(133, 153, 0);">var</span> <span style="color: rgb(38, 139, 210);">map</span> = <span style="color: rgb(133, 153, 0);">new</span> HashMap[Char, SortedSet[Int]]();
  <span style="color: rgb(133, 153, 0);">var</span> <span style="color: rgb(38, 139, 210);">i</span> = 0;
  str.foreach{
    c=&gt;
      map.get(c) <span style="color: rgb(133, 153, 0);">match</span>{
        <span style="color: rgb(133, 153, 0);">case</span> <span style="color: rgb(181, 137, 0);">Some</span>(<span style="color: rgb(38, 139, 210);">result</span>) =&gt; map(c) = result + i
        <span style="color: rgb(133, 153, 0);">case</span> <span style="color: rgb(181, 137, 0);">None</span> =&gt; map += (c-&gt; SortedSet{i})
      }
      i += 1
  }
  map
}

println(indexs(<span style="color: rgb(42, 161, 152);">&quot;Mississippi&quot;</span>)) 
</pre>
</p></div>
</div>
<div class="outline-3" id="outline-container-14-2" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-2" style="margin: 5px 10px;">
		<span class="section-number-3">14.2</span>&nbsp;重复前一个练习，这次用字符到列表的不可变映射。<br />
	</h3>
<div class="outline-text-3" id="text-14-2">
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">import</span> collection.immutable.HashMap
<span style="color: rgb(133, 153, 0);">import</span> collection.mutable.ListBuffer

<span style="color: rgb(133, 153, 0);">def</span> <span style="color: rgb(38, 139, 210);">indexs</span>(<span style="color: rgb(38, 139, 210);">str</span>:<span style="color: rgb(181, 137, 0);">String</span>):<span style="color: rgb(181, 137, 0);">Map[Char,ListBuffer[Int]]</span>={
  <span style="color: rgb(133, 153, 0);">var</span> <span style="color: rgb(38, 139, 210);">map</span> = <span style="color: rgb(133, 153, 0);">new</span> HashMap[Char, ListBuffer[Int]]()
  <span style="color: rgb(133, 153, 0);">var</span> <span style="color: rgb(38, 139, 210);">i</span> = 0
  str.foreach{
    c=&gt;
      map.get(c) <span style="color: rgb(133, 153, 0);">match</span>{
        <span style="color: rgb(133, 153, 0);">case</span> <span style="color: rgb(181, 137, 0);">Some</span>(<span style="color: rgb(38, 139, 210);">result</span>) =&gt; result += i
        <span style="color: rgb(133, 153, 0);">case</span> <span style="color: rgb(181, 137, 0);">None</span> =&gt; map += (c-&gt; ListBuffer{i})
      }
      i += 1
  }
  map
}

println(indexs(<span style="color: rgb(42, 161, 152);">&quot;Mississippi&quot;</span>))
</pre>
</p></div>
</div>
<div class="outline-3" id="outline-container-14-3" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-3" style="margin: 5px 10px;">
		<span class="section-number-3">14.3</span>&nbsp;编写一个函数，从一个整型链表中去除所有的零值。<br />
	</h3>
<div class="outline-text-3" id="text-14-3">
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">def</span> <span style="color: rgb(38, 139, 210);">removeZero</span>(<span style="color: rgb(38, 139, 210);">nums</span> : <span style="color: rgb(181, 137, 0);">List[Int]</span>):<span style="color: rgb(181, 137, 0);">List[Int]</span>={
  nums.filter(_ != 0)
}

println(removeZero(List(3,5,0,2,7,0)))
</pre>
</p></div>
</div>
<div class="outline-3" id="outline-container-14-4" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-4" style="margin: 5px 10px;">
		<span class="section-number-3">14.4</span>&nbsp;编写一个函数，接受一个字符串的集合，以及一个从字符串到整数值的映射。返回整型的集合，其值为能和集合中某个字符串相对应的映射的值。举例来说，给定Array(&quot;Tom&quot;,&quot;Fred&quot;,&quot;Harry&quot;)和Map(&quot;Tom&quot;-&gt;3,&quot;Dick&quot;-&gt;4,&quot;Harry&quot;-&gt;5)，返回Array(3,5)。提示：用flatMap将get返回的Option值组合在一起<br />
	</h3>
<div class="outline-text-3" id="text-14-4">
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">def</span> <span style="color: rgb(38, 139, 210);">strMap</span>(<span style="color: rgb(38, 139, 210);">strArr</span> : <span style="color: rgb(181, 137, 0);">Array[String]</span>,<span style="color: rgb(38, 139, 210);">map</span> : <span style="color: rgb(181, 137, 0);">Map[String,Int]</span>) : <span style="color: rgb(181, 137, 0);">Array[Int]</span> = {
  strArr.flatMap(map.get(_))
}

<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">a</span> = Array(<span style="color: rgb(42, 161, 152);">&quot;Tom&quot;</span>,<span style="color: rgb(42, 161, 152);">&quot;Fred&quot;</span>,<span style="color: rgb(42, 161, 152);">&quot;Harry&quot;</span>)
<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">m</span> = Map(<span style="color: rgb(42, 161, 152);">&quot;Tom&quot;</span>-&gt;3,<span style="color: rgb(42, 161, 152);">&quot;Dick&quot;</span>-&gt;4,<span style="color: rgb(42, 161, 152);">&quot;Harry&quot;</span>-&gt;5)
println(strMap(a,m).mkString(<span style="color: rgb(42, 161, 152);">&quot;,&quot;</span>))
</pre>
</p></div>
</div>
<div class="outline-3" id="outline-container-14-5" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-5" style="margin: 5px 10px;">
		<span class="section-number-3">14.5</span>&nbsp;实现一个函数，作用与mkString相同，使用reduceLeft。<br />
	</h3>
<div class="outline-text-3" id="text-14-5">
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">import</span> collection.mutable

<span style="color: rgb(133, 153, 0);">trait</span> <span style="color: rgb(181, 137, 0);">MyMkString</span>{
  <span style="color: rgb(133, 153, 0);">this</span>:mutable.Iterable[String]=&gt;
  <span style="color: rgb(133, 153, 0);">def</span> <span style="color: rgb(38, 139, 210);">myMkString</span> = <span style="color: rgb(133, 153, 0);">if</span>( <span style="color: rgb(133, 153, 0);">this</span> != Nil) <span style="color: rgb(133, 153, 0);">this</span>.reduceLeft(_ + _)
}

<span style="color: rgb(133, 153, 0);">var</span> <span style="color: rgb(38, 139, 210);">a</span> = <span style="color: rgb(133, 153, 0);">new</span> mutable.HashSet[String] <span style="color: rgb(133, 153, 0);">with</span> <span style="color: rgb(181, 137, 0);">MyMkString</span>

a += <span style="color: rgb(42, 161, 152);">&quot;1&quot;</span>
a += <span style="color: rgb(42, 161, 152);">&quot;2&quot;</span>
a += <span style="color: rgb(42, 161, 152);">&quot;3&quot;</span>

println(a.myMkString)
</pre>
</p></div>
</div>
<div class="outline-3" id="outline-container-14-6" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-6" style="margin: 5px 10px;">
		<span class="section-number-3">14.6</span>&nbsp;给定整型列表lst,(lst :\ List[Int]())(_ :: _ )得到什么?(List[Int]() /: lst)(_ :+ _)又得到什么？如何修改它们中的一个，以对原列表进行反向排序？<br />
	</h3>
<div class="outline-text-3" id="text-14-6">
<p style="margin: 5px 10px; text-indent: 40px;">
			得到的结果和lst相同
		</p>
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">lst</span> = List(1,2,3,4,5)

println((lst :\ List[Int]())(_ :: _))

println((List[Int]() /: lst)((a,b) =&gt; b :: a))
</pre>
</p></div>
</div>
<div class="outline-3" id="outline-container-14-7" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-7" style="margin: 5px 10px;">
		<span class="section-number-3">14.7</span>&nbsp;在13.11节中，表达式(prices zip quantities) map { p =&gt; p._1 * p._2}有些不够优雅。我们不能用(prices zip quantities) map { _ * _}，因为 _ * _ 是一个带两个参数的函数，而我们需要的是一个带单个类型为元组的参数的函数，Function对象的tupled方法可以将带两个参数的函数改为以元俎为参数的函数。将tupled应用于乘法函数，以使我们可以用它来映射由对偶组成的列表。<br />
	</h3>
<div class="outline-text-3" id="text-14-7">
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">prices</span> = List(5.0,20.0,9.95)
<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">quantities</span> = List(10,2,1)

println((prices zip quantities) map { Function.tupled(_ * _) })
</pre>
</p></div>
</div>
<div class="outline-3" id="outline-container-14-8" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-8" style="margin: 5px 10px;">
		<span class="section-number-3">14.8</span>&nbsp;编写一个函数。将Double数组转换成二维数组。传入列数作为参数。举例来说，Array(1,2,3,4,5,6)和三列，返回Array(Array(1,2,3),Array(4,5,6))。用grouped方法。<br />
	</h3>
<div class="outline-text-3" id="text-14-8">
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">def</span> <span style="color: rgb(38, 139, 210);">divArr</span>(<span style="color: rgb(38, 139, 210);">arr</span>:<span style="color: rgb(181, 137, 0);">Array[Double]</span>,<span style="color: rgb(38, 139, 210);">i</span>:<span style="color: rgb(181, 137, 0);">Int</span>)={
  arr.grouped(i).toArray
}

<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">arr</span> = Array(1.0,2,3,4,5,6)

divArr(arr,3).foreach(a =&gt; println(a.mkString(<span style="color: rgb(42, 161, 152);">&quot;,&quot;</span>)))
</pre>
</p></div>
</div>
<div class="outline-3" id="outline-container-14-9" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-9" style="margin: 5px 10px;">
		<span class="section-number-3">14.9</span>&nbsp;Harry Hacker写了一个从命令行接受一系列文件名的程序。对每个文件名，他都启动一个新的线程来读取文件内容并更新一个字母出现频率映射，声明为：<br />
	</h3>
<div class="outline-text-3" id="text-14-9">
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">frequencies</span> = <span style="color: rgb(133, 153, 0);">new</span> scala.collection.multable.HashMap[Char,Int] <span style="color: rgb(133, 153, 0);">with</span> <span style="color: rgb(181, 137, 0);">scala.collection.mutable.SynchronizedMap</span>[<span style="color: rgb(181, 137, 0);">Char</span>,<span style="color: rgb(181, 137, 0);">Int</span>]
</pre>
<p style="margin: 5px 10px; text-indent: 40px;">
			当读到字母c时，他调用
		</p>
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
frequencies(c) = frequencies.getOrElse(c,0) + 1
</pre>
<p style="margin: 5px 10px; text-indent: 40px;">
			为什么这样做得不到正确答案？如果他用如下方式实现呢：
		</p>
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">import</span> scala.collection.JavaConversions.asScalaConcurrentMap
<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">frequencies</span>:<span style="color: rgb(181, 137, 0);">scala.collection.mutable.ConcurrentMap[Char,Int]</span> = <span style="color: rgb(133, 153, 0);">new</span> java.util.concurrent.ConcurrentHashMap[Char,Int]
</pre>
<p style="margin: 5px 10px; text-indent: 40px;">
			并发问题，并发修改集合不安全.修改后的代码和修改前的代码没有什么太大的区别.
		</p>
</p></div>
</div>
<div class="outline-3" id="outline-container-14-10" style="color: rgb(101, 122, 131); font-family: MONACO, 'trebuchet ms', arial, helvetica, sans-serif; font-size: 13px; line-height: normal; background-color: rgb(253, 246, 227);">
<h3 id="sec-14-10" style="margin: 5px 10px;">
		<span class="section-number-3">14.10</span>&nbsp;Harry Hacker把文件读取到字符串中，然后想对字符串的不同部分用并行集合来并发地更新字母出现频率映射。他用了如下代码：<br />
	</h3>
<div class="outline-text-3" id="text-14-10">
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">frequencies</span> = <span style="color: rgb(133, 153, 0);">new</span> scala.collection.mutable.HashMap[Char,Int]
<span style="color: rgb(133, 153, 0);">for</span>(c &lt;- str.par) frequencies(c) = frequencies.getOrElse(c,0) + 1
</pre>
<p style="margin: 5px 10px; text-indent: 40px;">
			为什么说这个想法很糟糕？要真正地并行化这个计算，他应该怎么做呢？（提示：用aggregate） 并行修改共享变量，结果无法估计。
		</p>
<pre class="src src-scala" style="border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; font-size: small; overflow: auto; margin: 5px 10px;">
<span style="color: rgb(133, 153, 0);">import</span> scala.collection.immutable.HashMap

<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">str</span> = <span style="color: rgb(42, 161, 152);">&quot;abcabcac&quot;</span>

<span style="color: rgb(133, 153, 0);">val</span> <span style="color: rgb(38, 139, 210);">frequencies</span> = str.par.aggregate(HashMap[Char,Int]())(
        {
                (a,b) =&gt; 
                a + (b -&gt; (a.getOrElse(b,0) + 1))
    }
        ,
        {
        (map1,map2) =&gt;
        (map1.keySet ++ map2.keySet).foldLeft( HashMap[Char,Int]() ) { 
         (result,k) =&gt; 
           result + ( k -&gt; ( map1.getOrElse(k,0 ) + map2.getOrElse(k,0) ) ) 
       } 
    }
)

println(frequencies)</pre>
</p></div>
</div>

</div>

    <div class="pure-g pagination">
        
        <a class="pure-u-1-2 pagination-item " href="/java-scala/%25e5%25bf%25ab%25e5%25ad%25a6scala%25e4%25b9%25a0%25e9%25a2%2598%25e8%25a7%25a3%25e7%25ad%2594-%25e7%25ac%25ac%25e5%258d%2581%25e4%25ba%258c%25e7%25ab%25a0-%25e9%25ab%2598%25e9%2598%25b6%25e5%2587%25bd%25e6%2595%25b0.html" title="快学Scala习题解答—第十二章 高阶函数 "><p> <i class="fa fa-mail-reply"></i>&nbsp;快学Scala习题解答—第十二章 高阶函数</p></a>
        
        
        <a class="pure-u-1-2 pagination-item " href="/java-scala/%25e5%25bf%25ab%25e5%25ad%25a6scala%25e4%25b9%25a0%25e9%25a2%2598%25e8%25a7%25a3%25e7%25ad%2594-%25e7%25ac%25ac%25e5%258d%2581%25e5%259b%259b%25e7%25ab%25a0-%25e6%25a8%25a1%25e5%25bc%258f%25e5%258c%25b9%25e9%2585%258d%25e5%2592%258c%25e6%25a0%25b7%25e4%25be%258b%25e7%25b1%25bb.html" title="快学Scala习题解答—第十四章 模式匹配和样例类"><p>快学Scala习题解答—第十四章 模式匹配和样例类&nbsp;<i class="fa fa-mail-forward"></i></p></a>
        
    </div>
    <link href="/css/code.css" rel="stylesheet">
    <link href="/css/min/fancybox.css" rel="stylesheet">
    <script src="/js/min/jquery.toc.min.js" ></script>
    <script src="/js/min/jquery.qrcode.min.js" ></script>
    <script src="/js/min/jquery.fancybox.pack.js" ></script>
    <script src="/js/page.js" ></script>

    
    

    
    
    <a name="comments"> </a>
<div id="comment">
    <div class="ds-thread" data-title="快学Scala习题解答—第十三章 集合"></div>
    <script type="text/javascript">
        var duoshuoQuery = {short_name:""};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = '../js/min/duoshuo.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
                    || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
</div>

    






            </div>
            </div>
        <div class="footer">
                <a href="/love/welcome-my-blog.html">About</a>
                 <a href="/1">Collecting</a>
                <a href="tencent://message/?uin=561802774">QQ</a>
                <a href="https://github.com/ivanpig">GitHub</a>
            <script src="/js/min/nprogress.min.js"></script>
            <script src="/js/index.js"></script>
        </div>
        <div class="topfade"><a href="javascript:;" title="返回顶部"></a></div>

    </div>

</div>

</body>

</html>
